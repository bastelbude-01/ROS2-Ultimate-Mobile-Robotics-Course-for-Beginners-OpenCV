<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

 <!-- Chasis property -->
<xacro:property name="chassis_length" value="0.7"/>
<xacro:property name="chassis_width" value="0.7"/>
<xacro:property name="chassis_height" value="0.1"/>
<xacro:property name="chassis_mass" value="1"/>

  <!-- wheel property -->
<xacro:property name="wheel_radius" value="0.15"/>
<xacro:property name="wheel_length" value="0.1"/>
<xacro:property name="wheel_mass" value="2"/>
<!-- inertia = 1/12*m(d^2+h^2) -->
<xacro:property name="chassis_inertia_xx" value="${chassis_mass/12.0 * ( (chassis_height*chassis_height) + (chassis_width*chassis_width)  ) }" />
<xacro:property name="chassis_inertia_yy" value="${chassis_mass/12.0 * ( (chassis_height*chassis_height) + (chassis_length*chassis_length) ) }" />
<xacro:property name="chassis_inertia_zz" value="${chassis_mass/12.0 * ( (chassis_width*chassis_width)   + (chassis_length*chassis_length)  ) }" />


 <!-- //////////////////////////////////////////////////// -->
                        <!--Shapes LINKS AND JOINT-->
 <!-- ////////////////////////////////////////////////////////////-->

<xacro:macro name="Shapes" params="name position_of_joint_from_parent_xyz  color position_of_joint_from_parent_rpy box_size parent  mass   ">
    <link name="${name}_link">
        <inertial>
            <mass value="${mass}" />
            <origin xyz="0 0 0" rpy="0 0 0" />
            <inertia ixx="0.004" ixy="0.001" ixz="0" iyy="0.006" iyz="0" izz="0.007" />
        </inertial>

        <collision>
            <geometry>
                <box size="${box_size}"/>
            </geometry>
        </collision>

        <visual>
            <geometry>
                <box size="${box_size}"/>
            </geometry>
            <material name="${color}"/>
        </visual>
    </link>

    <joint name="${name}_joint" type="fixed">
      <parent link= "${parent}_link"/>
      <child link= "${name}_link"/>
      <origin rpy="${position_of_joint_from_parent_rpy}" xyz="${position_of_joint_from_parent_xyz}"/>
    </joint>
     <gazebo reference="${name}_link">
        <turnGravityOff>false</turnGravityOff>
     </gazebo>
</xacro:macro>




 <!-- //////////////////////////////////////////////////// -->
                        <!--Wheel LINKS AND JOINT-->
<!-- ////////////////////////////////////////////////////////////-->


<xacro:macro name="Wheel" params="name position_of_joint_from_parent_rpy position_of_joint_from_parent_xyz color mass  ">
    <link name="${name}_link">
        <collision>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
        </collision>
            
        <inertial>
            <mass value="${mass}" />
            <origin xyz="0 0 0" rpy="0 0 0" />
            <inertia ixx="0.004" ixy="0.001" ixz="0" iyy="0.006" iyz="0" izz="0.007" />
        </inertial>

        <visual>
            <geometry>
                <cylinder radius="0.15" length="0.1"/>
            </geometry>
            <material name="${color}"/>
        </visual>
    </link>

    <joint name="${name}_wheel_joint" type="continuous">
 <!-- axis is to defind on which axis body will rotate -> value 1 activates the corresponding axis -->
        <axis xyz="0 0 1"/>
        <origin rpy="${position_of_joint_from_parent_rpy}" xyz="${position_of_joint_from_parent_xyz}"/>
        <child link="${name}_link"/>
        <parent link="chassis_link"/>
        <joint_properties damping="1.0" friction="5.0"/>
      </joint>
    </xacro:macro>



</robot>